<!doctype html><html lang=vi class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.101.0"><meta name=description content><meta name=author content="journeyoftheaverageguy@gmail.com"><link rel=icon href=https://hotloncon1.github.io/aws-lab000052/images/favicon.png type=image/png><title>Tự động hóa Serverless Microservice :: Cấu hình tự động phát hành ứng dụng</title><link href=https://hotloncon1.github.io/aws-lab000052/css/nucleus.css?1660055407 rel=stylesheet><link href=https://hotloncon1.github.io/aws-lab000052/css/fontawesome-all.min.css?1660055407 rel=stylesheet><link href=https://hotloncon1.github.io/aws-lab000052/css/hybrid.css?1660055407 rel=stylesheet><link href=https://hotloncon1.github.io/aws-lab000052/css/featherlight.min.css?1660055407 rel=stylesheet><link href=https://hotloncon1.github.io/aws-lab000052/css/perfect-scrollbar.min.css?1660055407 rel=stylesheet><link href=https://hotloncon1.github.io/aws-lab000052/css/auto-complete.css?1660055407 rel=stylesheet><link href=https://hotloncon1.github.io/aws-lab000052/css/atom-one-dark-reasonable.css?1660055407 rel=stylesheet><link href=https://hotloncon1.github.io/aws-lab000052/css/theme.css?1660055407 rel=stylesheet><link href=https://hotloncon1.github.io/aws-lab000052/css/hugo-theme.css?1660055407 rel=stylesheet><link href=https://hotloncon1.github.io/aws-lab000052/css/theme-workshop.css?1660055407 rel=stylesheet><script src=https://hotloncon1.github.io/aws-lab000052/js/jquery-3.3.1.min.js?1660055407></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=https://hotloncon1.github.io/aws-lab000052/vi/4-extending-serverless-microservices/4.2-automating-your-microservice/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=https://hotloncon1.github.io/aws-lab000052/><svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff}.cls-2{fill:#f90;fill-rule:evenodd}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09 10.85a4.7 4.7.0 00.19 1.48 7.73 7.73.0 00.54 1.19.77.77.0 01.12.38.64.64.0 01-.32.49l-1 .7a.83.83.0 01-.44.15.69.69.0 01-.49-.23 3.8 3.8.0 01-.6-.77q-.25-.42-.51-1a6.14 6.14.0 01-4.89 2.3 4.54 4.54.0 01-3.32-1.19 4.27 4.27.0 01-1.22-3.2 4.28 4.28.0 011.46-3.4A6.06 6.06.0 017.69 6.46a12.47 12.47.0 011.76.13q.92.13 1.91.36V5.73a3.65 3.65.0 00-.79-2.66A3.81 3.81.0 007.86 2.3a7.71 7.71.0 00-1.79.22 12.78 12.78.0 00-1.79.57 4.55 4.55.0 01-.58.22h-.26q-.35.0-.35-.52V2a1.09 1.09.0 01.12-.58 1.2 1.2.0 01.47-.35A10.88 10.88.0 015.77.32 10.19 10.19.0 018.36.0a6 6 0 014.35 1.35 5.49 5.49.0 011.38 4.09zM7.34 13.38a5.36 5.36.0 001.72-.31A3.63 3.63.0 0010.63 12 2.62 2.62.0 0011.19 11a5.63 5.63.0 00.16-1.44v-.7a14.35 14.35.0 00-1.53-.28 12.37 12.37.0 00-1.56-.1 3.84 3.84.0 00-2.47.67A2.34 2.34.0 005 11a2.35 2.35.0 00.61 1.76A2.4 2.4.0 007.34 13.38zm13.35 1.8a1 1 0 01-.64-.16 1.3 1.3.0 01-.35-.65L15.81 1.51a3 3 0 01-.15-.67.36.36.0 01.41-.41H17.7a1 1 0 01.65.16 1.4 1.4.0 01.33.65l2.79 11 2.59-11A1.17 1.17.0 0124.39.6a1.1 1.1.0 01.67-.16H26.4a1.1 1.1.0 01.67.16 1.17 1.17.0 01.32.65L30 12.39 32.88 1.25A1.39 1.39.0 0133.22.6a1 1 0 01.65-.16h1.54a.36.36.0 01.41.41 1.36 1.36.0 010 .26 3.64 3.64.0 01-.12.41l-4 12.86a1.3 1.3.0 01-.35.65 1 1 0 01-.64.16H29.25a1 1 0 01-.67-.17 1.26 1.26.0 01-.32-.67L25.67 3.64l-2.56 10.7a1.26 1.26.0 01-.32.67 1 1 0 01-.67.17zm21.36.44a11.28 11.28.0 01-2.56-.29 7.44 7.44.0 01-1.92-.67 1 1 0 01-.61-.93v-.84q0-.52.38-.52a.9.9.0 01.31.06l.42.17a8.77 8.77.0 001.83.58 9.78 9.78.0 002 .2 4.48 4.48.0 002.43-.55 1.76 1.76.0 00.86-1.57 1.61 1.61.0 00-.45-1.16A4.29 4.29.0 0043 9.22l-2.41-.76A5.15 5.15.0 0138 6.78a3.94 3.94.0 01-.83-2.41 3.7 3.7.0 01.45-1.85 4.47 4.47.0 011.19-1.37 5.27 5.27.0 011.7-.86A7.4 7.4.0 0142.6.0a8.87 8.87.0 011.12.07q.57.07 1.08.19t.95.26a4.27 4.27.0 01.7.29 1.59 1.59.0 01.49.41.94.94.0 01.15.55v.79q0 .52-.38.52a1.76 1.76.0 01-.64-.2 7.74 7.74.0 00-3.2-.64 4.37 4.37.0 00-2.21.47 1.6 1.6.0 00-.79 1.48 1.58 1.58.0 00.49 1.18 4.94 4.94.0 001.83.92L44.55 7a5.08 5.08.0 012.57 1.6A3.76 3.76.0 0147.9 11a4.21 4.21.0 01-.44 1.93 4.4 4.4.0 01-1.21 1.47 5.43 5.43.0 01-1.85.93A8.25 8.25.0 0142.05 15.62z"/><path class="cls-2" d="M45.19 23.81C39.72 27.85 31.78 30 25 30A36.64 36.64.0 01.22 20.57c-.51-.46-.06-1.09.56-.74A49.78 49.78.0 0025.53 26.4 49.23 49.23.0 0044.4 22.53C45.32 22.14 46.1 23.14 45.19 23.81z"/><path class="cls-2" d="M47.47 21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74 3.13-2.2 8.27-1.57 8.86-.83s-.16 5.89-3.09 8.35c-.45.38-.88.18-.68-.32C46.69 25.8 48.17 22.11 47.47 21.21z"/></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=https://hotloncon1.github.io/aws-lab000052/js/lunr.min.js?1660055407></script>
<script type=text/javascript src=https://hotloncon1.github.io/aws-lab000052/js/auto-complete.js?1660055407></script>
<script type=text/javascript>var baseurl="https://hotloncon1.github.io/aws-lab000052//vi"</script><script type=text/javascript src=https://hotloncon1.github.io/aws-lab000052/js/search.js?1660055407></script></div><div class=highlightable><ul class=topics><li data-nav-id=/vi/1-introduction/ title="Giới thiệu" class=dd-item><a href=https://hotloncon1.github.io/aws-lab000052/vi/1-introduction/><b>1. </b>Giới thiệu
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/2-prepare/ title="Chuẩn bị" class=dd-item><a href=https://hotloncon1.github.io/aws-lab000052/vi/2-prepare/><b>2. </b>Chuẩn bị
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/2-prepare/2.1-createkeypair/ title="Tạo Key Pair" class=dd-item><a href=https://hotloncon1.github.io/aws-lab000052/vi/2-prepare/2.1-createkeypair/><b>2.1. </b>Tạo Key Pair
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/2-prepare/2.2-createstack/ title="Tạo CloudFormation stack" class=dd-item><a href=https://hotloncon1.github.io/aws-lab000052/vi/2-prepare/2.2-createstack/><b>2.2. </b>Tạo CloudFormation stack
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/2-prepare/2.3-connectvirtualmachine/ title="Kết nối Windows instance" class=dd-item><a href=https://hotloncon1.github.io/aws-lab000052/vi/2-prepare/2.3-connectvirtualmachine/><b>2.3. </b>Kết nối Windows instance
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/2-prepare/2.4-setups3/ title="Cài đặt S3 buckets" class=dd-item><a href=https://hotloncon1.github.io/aws-lab000052/vi/2-prepare/2.4-setups3/><b>2.4. </b>Cài đặt S3 buckets
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/3-create-serverless-microservices/ title="Tạo một microservice" class=dd-item><a href=https://hotloncon1.github.io/aws-lab000052/vi/3-create-serverless-microservices/><b>3. </b>Tạo một microservice
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/3-create-serverless-microservices/3.1-create-lambda-function/ title="Tạo và kiểm tra hàm Lambda tại cục bộ" class=dd-item><a href=https://hotloncon1.github.io/aws-lab000052/vi/3-create-serverless-microservices/3.1-create-lambda-function/><b>3.1. </b>Tạo và kiểm tra hàm Lambda tại cục bộ
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-create-serverless-microservices/3.2-update-and-test/ title="Tải lên và kiểm tra hàm Lambda trong AWS Lambda " class=dd-item><a href=https://hotloncon1.github.io/aws-lab000052/vi/3-create-serverless-microservices/3.2-update-and-test/><b>3.2. </b>Tải lên và kiểm tra hàm Lambda trong AWS Lambda
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/4-extending-serverless-microservices/ title="Mở rộng Serverless Microservices" class="dd-item
parent"><a href=https://hotloncon1.github.io/aws-lab000052/vi/4-extending-serverless-microservices/><b>4. </b>Mở rộng Serverless Microservices
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/4-extending-serverless-microservices/4.1-deploy-imagemanager-lambda/ title="Triển khai hàm Lambda ImageManager " class=dd-item><a href=https://hotloncon1.github.io/aws-lab000052/vi/4-extending-serverless-microservices/4.1-deploy-imagemanager-lambda/><b>4.1. </b>Triển khai hàm Lambda ImageManager
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-extending-serverless-microservices/4.2-automating-your-microservice/ title="Tự động hóa Serverless Microservice" class="dd-item
active"><a href=https://hotloncon1.github.io/aws-lab000052/vi/4-extending-serverless-microservices/4.2-automating-your-microservice/><b>4.2. </b>Tự động hóa Serverless Microservice
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-extending-serverless-microservices/4.3-update-lambda-function/ title="(Optional) Cập nhật quyền của hàm Lambda " class=dd-item><a href=https://hotloncon1.github.io/aws-lab000052/vi/4-extending-serverless-microservices/4.3-update-lambda-function/><b>4.3. </b>(Optional) Cập nhật quyền của hàm Lambda
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/5-use-codestar-orchestration/ title="Cấu hình điều phối với CodeStar" class=dd-item><a href=https://hotloncon1.github.io/aws-lab000052/vi/5-use-codestar-orchestration/><b>5. </b>Cấu hình điều phối với CodeStar
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-use-codestar-orchestration/5.1-create-new-branch/ title="Tạo nhánh mới" class=dd-item><a href=https://hotloncon1.github.io/aws-lab000052/vi/5-use-codestar-orchestration/5.1-create-new-branch/><b>5.1. </b>Tạo nhánh mới
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-use-codestar-orchestration/5.2-redeploy-through-cicd-pipeline/ title="Triển khai lại thông qua CI/CD pipeline " class=dd-item><a href=https://hotloncon1.github.io/aws-lab000052/vi/5-use-codestar-orchestration/5.2-redeploy-through-cicd-pipeline/><b>5.2. </b>Triển khai lại thông qua CI/CD pipeline
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-use-codestar-orchestration/5.3-update-target-region/ title="Cập nhật target region cho API " class=dd-item><a href=https://hotloncon1.github.io/aws-lab000052/vi/5-use-codestar-orchestration/5.3-update-target-region/><b>5.3. </b>Cập nhật target region cho API
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/6-challenge/ title="Thử thách - Expose microservice API" class=dd-item><a href=https://hotloncon1.github.io/aws-lab000052/vi/6-challenge/><b>6. </b>Thử thách - Expose microservice API
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/7-cleanup/ title="Dọn dẹp tài nguyên" class=dd-item><a href=https://hotloncon1.github.io/aws-lab000052/vi/7-cleanup/><b>7. </b>Dọn dẹp tài nguyên
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=http://awsstudygroup.com><i class='fab fa-aws'></i> AWS Study Group - Blog</a></li><li><a class=padding href=https://www.facebook.com/groups/660548818043427/><i class='fab fa-facebook'></i> AWS Study Group - Nhóm FB</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value"><option id=en value=https://hotloncon1.github.io/aws-lab000052/4-extending-serverless-microservices/4.2-automating-your-microservice/>English</option><option id=vi value=https://hotloncon1.github.io/aws-lab000052/vi/4-extending-serverless-microservices/4.2-automating-your-microservice/ selected>Tiếng Việt</option></select><svg id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><left><b>Workshop</b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7833031&style=0038&nbdigits=9&type=page&initCount=0" title=Migrate alt="web counter" border=0></a><br><b><a href=https://cloudjourney.awsstudygroup.com/>Cloud Journey</a></b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" alt="web counter" border=0></left>
<left><br><br><b>Last Updated</b><br><i><font color=orange>09-08-2022</font></i></left>
<left><br><br><b>Team</b><br><i><a href=https://www.linkedin.com/in/jotaguy style=color:orange>Gia Hưng</a></i></left>
<script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=https://hotloncon1.github.io/aws-lab000052/vi/>Tạo một Microservice</a> > <a href=https://hotloncon1.github.io/aws-lab000052/vi/4-extending-serverless-microservices/>Mở rộng Serverless Microservices</a> > Tự động hóa Serverless Microservice</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Tự động hóa Serverless Microservice</h1><h4 id=tự-động-hóa-serverless-microservice>Tự động hóa Serverless Microservice</h4><p>Trong bài tập trước, bạn đã sử dụng IDE Eclipse để tạo một hàm Lambda bằng Bộ công cụ AWS cho Eclipse và cập nhật một hàm Lambda. Điều này cho phép bạn khởi tạo việc tự động tải lên hàm Lambda của mình theo cách thủ công. Tuy nhiên, cơ chế này có thể không thuận tiện cho việc tự động hóa các bước triển khai cho các hàm hoặc phối hợp triển khai và cập nhật cho các phần tử khác của ứng dụng serverless, chẳng hạn như event sources và downstream resources. Ví dụ: IDE Eclipse không cung cấp cho bạn khả năng triển khai và cập nhật S3 bucket và kết nối S3 PUT OBJECT trigger, cùng với hàm Lambda của bạn như một đơn vị triển khai.</p><p>Bạn có thể sử dụng <strong>AWS CloudFormation</strong> để dễ dàng chỉ định, triển khai và định cấu hình các ứng dụng serverless. AWS CloudFormation là một dịch vụ giúp bạn lập mô hình và thiết lập các tài nguyên Amazon Web Services để bạn có thể dành ít thời gian hơn cho việc quản lý các tài nguyên đó và nhiều thời gian hơn để tập trung vào các ứng dụng chạy trong AWS của bạn. Bạn tạo một mẫu ( <strong>Template</strong> ) mô tả tất cả các tài nguyên AWS mà bạn muốn (như các hàm Lambda và nhóm S3) và AWS CloudFormation sẽ đảm nhận việc cung cấp và cấu hình các tài nguyên đó cho bạn.</p><p>Ngoài ra, bạn có thể sử dụng <strong>AWS Serverless Application Model (SAM)</strong> để thể hiện các tài nguyên bao gồm ứng dụng serverless. Các loại tài nguyên này, chẳng hạn như các hàm và API của AWS Lambda, được AWS CloudFormation hỗ trợ đầy đủ và giúp bạn xác định và triển khai ứng dụng serverless của mình dễ dàng hơn.</p><p>Trong phần này, bạn sẽ sử dụng <strong>AWS CLI</strong> và <strong>AWS CloudFormation/SAM</strong> để đóng gói ứng dụng và triển khai nó từ đầu mà không cần phải tạo hoặc định cấu hình bất kỳ phần phụ thuộc nào theo cách thủ công.</p><ol><li>Trong Eclipse IDE, click chuột phải vào project <strong>TestLambda</strong></li></ol><ul><li>Click <strong>New</strong></li><li>Click <strong>File</strong>
<img src="https://hotloncon1.github.io/aws-lab000052/images/4-extending-serverless-microservices/4.2-automating-your-microservice/automating-your-microservice-001.png?featherlight=false&width=90pc" alt="Deploy ImageManager Lambda Function"></li></ul><ol start=2><li>Tại mục <strong>File name</strong>, điền <code>template.yaml</code></li></ol><ul><li>Click <strong>Finish</strong>
<img src="https://hotloncon1.github.io/aws-lab000052/images/4-extending-serverless-microservices/4.2-automating-your-microservice/automating-your-microservice-002.png?featherlight=false&width=90pc" alt="Deploy ImageManager Lambda Function"></li></ul><ol start=3><li>File <strong>template.yaml</strong> sẽ nằm cùng cấp với file <strong>pom.xml</strong> của project <strong>TestLambda</strong></li></ol><ul><li>Thay nội dung file <strong>template.yaml</strong> bằng nội dung dưới đây</li></ul><pre tabindex=0><code>AWSTemplateFormatVersion: &#39;2010-09-09&#39;
Transform: &#39;AWS::Serverless-2016-10-31&#39;
Description: Testing lambda and S3
Resources:
  TestLambda:
    Type: &#39;AWS::Serverless::Function&#39;
    Properties:
      Handler: idevelop.lambda.s3handler.LambdaFunctionHandler
      Runtime: java8
      CodeUri: target/s3handler-1.0.0.jar
      Description: Testing lambda and S3
      MemorySize: 512
      Timeout: 15
      Role: !Sub arn:aws:iam::${AWS::AccountId}:role/LambdaRole
      Events:
        CreateThumbnailEvent:
          Type: S3
          Properties:
            Bucket:
              Ref: ImageManagerSrcBucket
            Events:
              - &#39;s3:ObjectCreated:Put&#39;
            Filter:
              S3Key:
                Rules:
                  - Name: prefix
                    Value: uploads/

  ImageManagerSrcBucket:
    Type: AWS::S3::Bucket
    Properties:
      BucketName: !Sub idevelop-imagemanager-${AWS::AccountId}
</code></pre><ul><li>Lưu lại
<img src="https://hotloncon1.github.io/aws-lab000052/images/4-extending-serverless-microservices/4.2-automating-your-microservice/automating-your-microservice-003.png?featherlight=false&width=90pc" alt="Deploy ImageManager Lambda Function"></li></ul><ol start=4><li>Chúng ta sẽ sử dụng AWS CLI để đẩy tập tin <strong>template.yaml</strong> lên S3 bucket nơi mà nó có thể được triển khai.</li></ol><ul><li>Trong Command prompt, chạy câu lệnh dưới đây</li></ul><pre tabindex=0><code>aws cloudformation package --template-file template.yaml --s3-bucket &lt;YOUR_CODE_BUCKET_NAME&gt; --output-template deploy-template.yaml --profile devaxacademy
</code></pre><p><div class="notices note"><p>Thay <strong>&lt;YOUR_CODE_BUCKET_NAME></strong> bằng tên <strong>S3 bucket</strong> có tên bắt đầu bằng <strong>idevelop-sourcecode</strong> chúng ta đã tạo</p></div><img src="https://hotloncon1.github.io/aws-lab000052/images/4-extending-serverless-microservices/4.2-automating-your-microservice/automating-your-microservice-004.png?featherlight=false&width=60pc" alt="Deploy ImageManager Lambda Function"><div class="notices note"><p>Nếu bạn thấy một thông báo lỗi <strong>‘NoneType’ object has no attribute ‘items’</strong> hãy kiểm tra lại format của tập tin <strong>template.yaml</strong></p></div></p><p><div class="notices info"><p>Câu lệnh <strong>aws cloudformation package</strong> sẽ lấy mẫu AWS SAM được cung cấp và viết lại nó trong định nghĩa của artifact được tự động tải lên S3 bucket. Trong trường hợp này, <strong>deploy-template.yaml</strong> được tạo và chứa giá trị <strong>CodeUri</strong> trỏ đến tập tin zip triển khai trong Amazon S3. Mẫu này đại diện cho ứng dụng serverless của bạn</p></div>5. Bây giờ bạn đã sẵn sàng triển khai tập tin JAR dưới dạng một hàm Lambda và kết nối S3 trigger vào một S3 bucket mới. Bạn sẽ nhận thấy kết quả từ lệnh trước đó hướng dẫn chúng ta những gì cần chạy để triển khai mẫu đóng gói.</p><ul><li>Trong Command prompt, chạy câu lệnh dưới đây</li></ul><pre tabindex=0><code>aws cloudformation deploy --template-file deploy-template.yaml --stack-name ImageManagerDemo --profile devaxacademy
</code></pre><p><img src="https://hotloncon1.github.io/aws-lab000052/images/4-extending-serverless-microservices/4.2-automating-your-microservice/automating-your-microservice-005.png?featherlight=false&width=60pc" alt="Deploy ImageManager Lambda Function">
6. Truy cập <a href=https://console.aws.amazon.com/cloudformation/home><strong>Amazon CloudFormation Console</strong></a>.</p><ul><li>Click <strong>Stacks</strong></li><li>Nhập <code>ImageManagerDemo</code> vào thanh tìm kiếm và nhấn <strong>Enter</strong></li><li>Chúng ta sẽ thấy CloudFormation stack có tên <strong>ImageManagerDemo</strong> được tạo
<img src="https://hotloncon1.github.io/aws-lab000052/images/4-extending-serverless-microservices/4.2-automating-your-microservice/automating-your-microservice-006.png?featherlight=false&width=90pc" alt="Deploy ImageManager Lambda Function"><div class="notices info"><p>Bạn có thể xem quá trình tạo tài nguyên trực tiếp trong bảng điều khiển CloudFormation.<br>CloudFormation template tạo một S3 Bucket có tên <strong>idevelop-imagemanager-&lt;YOUR_ACCOUNT_ID></strong> trong đó <strong>&lt;YOUR_ACCOUNT_ID></strong> là <strong>AWS account ID</strong> của bạn.<br>Template cũng tạo một hàm Lambda mới có tên là <strong>ImageManagerDemo-TestLambda-XXXXXX</strong> trong đó <strong>XXXXXX</strong> là một mã định danh ngẫu nhiên được CloudFormation phân bổ để đảm bảo tính duy nhất của tên hàm.</p></div></li></ul><ol start=7><li>Truy cập <a href=https://s3.console.aws.amazon.com/s3/><strong>AWS S3 Console</strong></a></li></ol><ul><li>Nhập <code>idevelop-imagemanager</code> vào ô tìm kiếm</li><li>Click S3 bucket <strong>idevelop-imagemanager-&lt;YOUR_ACCOUNT_ID></strong>
<img src="https://hotloncon1.github.io/aws-lab000052/images/4-extending-serverless-microservices/4.2-automating-your-microservice/automating-your-microservice-007.png?featherlight=false&width=90pc" alt="Deploy ImageManager Lambda Function"></li></ul><ol start=8><li>Click <strong>Create folder</strong>
<img src="https://hotloncon1.github.io/aws-lab000052/images/4-extending-serverless-microservices/4.2-automating-your-microservice/automating-your-microservice-008.png?featherlight=false&width=90pc" alt="Deploy ImageManager Lambda Function"></li><li>Tại mục <strong>Folder name</strong>, nhập <code>uploads</code></li></ol><ul><li>Click <strong>Create folder</strong>
<img src="https://hotloncon1.github.io/aws-lab000052/images/4-extending-serverless-microservices/4.2-automating-your-microservice/automating-your-microservice-009.png?featherlight=false&width=90pc" alt="Deploy ImageManager Lambda Function"></li></ul><ol start=10><li>Click thư mục <strong>uploads/</strong>
<img src="https://hotloncon1.github.io/aws-lab000052/images/4-extending-serverless-microservices/4.2-automating-your-microservice/automating-your-microservice-010.png?featherlight=false&width=90pc" alt="Deploy ImageManager Lambda Function"></li><li>Click <strong>Upload</strong>
<img src="https://hotloncon1.github.io/aws-lab000052/images/4-extending-serverless-microservices/4.2-automating-your-microservice/automating-your-microservice-011.png?featherlight=false&width=90pc" alt="Deploy ImageManager Lambda Function"></li><li>Click <strong>Add files</strong></li></ol><ul><li>Chọn file <strong>Puppy.jpg</strong> chúng ta đã tải về</li><li>CLick <strong>Add files</strong></li><li>Chọn file bất kỳ không phải ảnh</li><li>Click <strong>Upload</strong>
<img src="https://hotloncon1.github.io/aws-lab000052/images/4-extending-serverless-microservices/4.2-automating-your-microservice/automating-your-microservice-012.png?featherlight=false&width=90pc" alt="Deploy ImageManager Lambda Function"></li></ul><ol start=13><li>Click <strong>Close</strong>
<img src="https://hotloncon1.github.io/aws-lab000052/images/4-extending-serverless-microservices/4.2-automating-your-microservice/automating-your-microservice-013.png?featherlight=false&width=90pc" alt="Deploy ImageManager Lambda Function"></li><li>Chúng ta sẽ thấy tệp tin không phải hình ảnh chúng ta tải lên đã bị xóa.</li></ol><ul><li>Click <strong>idevelop-imagemanager-&lt;YOUR_ACCOUNT_ID></strong>
<img src="https://hotloncon1.github.io/aws-lab000052/images/4-extending-serverless-microservices/4.2-automating-your-microservice/automating-your-microservice-014.png?featherlight=false&width=90pc" alt="Deploy ImageManager Lambda Function"></li></ul><ol start=15><li>Click thư mục <strong>processed</strong>
<img src="https://hotloncon1.github.io/aws-lab000052/images/4-extending-serverless-microservices/4.2-automating-your-microservice/automating-your-microservice-015.png?featherlight=false&width=90pc" alt="Deploy ImageManager Lambda Function"></li><li>Chúng ta sẽ thấy hình ảnh thu nhỏ của tệp tin <strong>Puppy.jpg</strong>
<img src="https://hotloncon1.github.io/aws-lab000052/images/4-extending-serverless-microservices/4.2-automating-your-microservice/automating-your-microservice-016.png?featherlight=false&width=90pc" alt="Deploy ImageManager Lambda Function"></li><li>Truy cập <a href=https://console.aws.amazon.com/cloudformation/home><strong>Amazon CloudFormation Console</strong></a>.</li></ol><ul><li>Click <strong>Stacks</strong></li><li>Nhập <code>ImageManagerDemo</code> vào thanh tìm kiếm và nhấn <strong>Enter</strong></li><li>Click tên của CloudFormation stack
<img src="https://hotloncon1.github.io/aws-lab000052/images/4-extending-serverless-microservices/4.2-automating-your-microservice/automating-your-microservice-017.png?featherlight=false&width=90pc" alt="Deploy ImageManager Lambda Function"></li></ul><ol start=18><li>Click <strong>Monitor</strong></li></ol><ul><li>Click <strong>View logs in CloudWatch</strong>
<img src="https://hotloncon1.github.io/aws-lab000052/images/4-extending-serverless-microservices/4.2-automating-your-microservice/automating-your-microservice-018.png?featherlight=false&width=90pc" alt="Deploy ImageManager Lambda Function"></li></ul><ol start=19><li>Click <strong>Log stream</strong> đầu tiên trong bảng <strong>Log streams</strong>
<img src="https://hotloncon1.github.io/aws-lab000052/images/4-extending-serverless-microservices/4.2-automating-your-microservice/automating-your-microservice-019.png?featherlight=false&width=90pc" alt="Deploy ImageManager Lambda Function"></li><li>Chúng ta hãy xem quá trình thực hiện như thế nào trong <strong>CloudWatch log</strong>
<img src="https://hotloncon1.github.io/aws-lab000052/images/4-extending-serverless-microservices/4.2-automating-your-microservice/automating-your-microservice-020.png?featherlight=false&width=90pc" alt="Deploy ImageManager Lambda Function"></li></ol><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=https://hotloncon1.github.io/aws-lab000052/vi/4-extending-serverless-microservices/4.1-deploy-imagemanager-lambda/ title="Triển khai hàm Lambda ImageManager "><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=https://hotloncon1.github.io/aws-lab000052/vi/4-extending-serverless-microservices/4.3-update-lambda-function/ title="(Optional) Cập nhật quyền của hàm Lambda " style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=https://hotloncon1.github.io/aws-lab000052/js/clipboard.min.js?1660055407></script>
<script src=https://hotloncon1.github.io/aws-lab000052/js/perfect-scrollbar.min.js?1660055407></script>
<script src=https://hotloncon1.github.io/aws-lab000052/js/perfect-scrollbar.jquery.min.js?1660055407></script>
<script src=https://hotloncon1.github.io/aws-lab000052/js/jquery.sticky.js?1660055407></script>
<script src=https://hotloncon1.github.io/aws-lab000052/js/featherlight.min.js?1660055407></script>
<script src=https://hotloncon1.github.io/aws-lab000052/js/highlight.pack.js?1660055407></script>
<script>hljs.initHighlightingOnLoad()</script><script src=https://hotloncon1.github.io/aws-lab000052/js/modernizr.custom-3.6.0.js?1660055407></script>
<script src=https://hotloncon1.github.io/aws-lab000052/js/learn.js?1660055407></script>
<script src=https://hotloncon1.github.io/aws-lab000052/js/hugo-learn.js?1660055407></script>
<link href=https://hotloncon1.github.io/aws-lab000052/mermaid/mermaid.css?1660055407 rel=stylesheet><script src=https://hotloncon1.github.io/aws-lab000052/mermaid/mermaid.js?1660055407></script>
<script>mermaid.initialize({startOnLoad:!0})</script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-158079754-2","auto"),ga("send","pageview")</script></body></html>